
<div class="container mt-2">
    <a [routerLink]="['/people', wish.receiver.id]" class="badge badge-secondary mb-2 lead"> 
        <i class="fa fa-arrow-left" aria-hidden="true"></i> Terug naar lijst</a>
    <div class="jumbotron pt-3 pb-1 mb-1">
        <div class="row">
            <div class="col col-12">
                <h2>{{wish.title}}</h2>
                <h6>voor {{wish.receiver.fullName}}
                    <a class="badge badge-light text-dark p-0 ml-2"
                        [routerLink]="['/people', wish.receiver.id]" uib-tooltip="Terug naar lijst"
                        tooltip-placement="top-left" tooltip-class="customTooltip"><fa-icon [icon]="listIcon"></fa-icon></a>
                </h6>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <h3 class="float-right"><span class="badge badge-pill badge-warning">{{wish.price | currency : "EUR" : 'symbol' : '1.2-2'}}</span></h3>
            </div>
        </div>
    </div>
    <div class="row" ng-show="wishInfoCtrl.reservationStatus(wishInfoCtrl.wish) === 'fulfilled'">
        <div class="col-12 text-success font-weight-bold p-4">
            <span ng-show="!wishInfoCtrl.userIsReceiver(wishInfoCtrl.receiverID)">{{wish.receiver.firstName}} heeft dit
                cadeau al, je kan dit dus niet meer reserveren.</span>
            <span ng-show="wishInfoCtrl.userIsReceiver(wishInfoCtrl.receiverID)">Je hebt dit cadeau al, je kan dit dus
                niet meer reserveren.</span>
        </div>
    </div>
    <div class="row">
        <div class="col-md-5">
            <gimmi-image-view 
                class="img-fluid" 
                [image]="wish.image">
            </gimmi-image-view>
        </div>
        <div class="col-md-4">
            <ul class="list-group my-2">
                <li class="list-group-item">
                    <fa-icon [icon]="calendarIcon" class="mr-2"></fa-icon>
                    Toegevoegd op: {{wish.createdAt | date: 'dd/MM/\'yy' }}
                </li>
                <li class="list-group-item">
                    <fa-icon [icon]="userIcon" class="mr-2"></fa-icon>
                    Idee van: {{wish.createdBy.fullName}}
                </li>
                <li class="list-group-item" [hidden]="!wish.url">
                    <fa-icon [icon]="linkIcon" class="mr-2"></fa-icon>
                    <a href="{{wish.url}}" target="_blank">Externe website</a>
                </li>
                <li class="list-group-item"
                    [hidden]="!wish.reservation"
                    ng-show="wishInfoCtrl.wish.reservation && !wishInfoCtrl.isIncognitoReservation(wishInfoCtrl.wish)">
                    <fa-icon [icon]="linkIcon" class="mr-2"></fa-icon>Gereserveerd door:
                    {{wish.reservation?.reservedBy.fullName}}
                </li>
                <li class="list-group-item"
                    ng-show="!wishInfoCtrl.wish.reservation || wishInfoCtrl.isIncognitoReservation(wishInfoCtrl.wish)">
                    <fa-icon [icon]="giftIcon" class="mr-2"></fa-icon>Nog niet gereserveerd
                </li>
                <li class="list-group-item" [hidden]="!wish.color">
                    <fa-icon [icon]="colorIcon" class="mr-2"></fa-icon>{{wish.color}}
                </li>
                <li class="list-group-item" [hidden]="!wish.size">
                    <fa-icon [icon]="sizeIcon" class="mr-2"></fa-icon>{{wish.size}}
                </li>
                <li class="list-group-item" [hidden]="!wish.description">
                    <fa-icon [icon]="textIcon" class="mr-2"></fa-icon>{{wish.description}}
                </li>
                <li class="list-group-item" [hidden]="!wish.closure">
                    <fa-icon [icon]="doneIcon" class="mr-2"></fa-icon>Afgesloten op:
                    {{wish.closure?.closedOn | date: 'dd / MM / \'yy'}}
                </li>
            </ul>
        </div>
        <div class="col-md-3 pull-right">
            <button type="button" name="editWish" class="btn btn-block btn-outline-info btn-multiline text-left"
                ng-show="wishInfoCtrl.userIsReceiver(wishInfoCtrl.receiverID) || wishInfoCtrl.userIsCreator(wishInfoCtrl.wish.createdBy._id)"
                ng-click="wishInfoCtrl.editWishDetails(wishInfoCtrl.wish)"><i class="fa fa-edit" aria-hidden="true"></i>
                Wijzig de details</button>
            <button type="button" name="reserveWish" class="btn btn-block btn-outline-info btn-multiline text-left"
                ng-show="wishInfoCtrl.reservationStatus(wishInfoCtrl.wish) === 'unreserved' || wishInfoCtrl.isIncognitoReservation(wishInfoCtrl.wish)"
                ng-click="wishInfoCtrl.addReservation(wishInfoCtrl.wish, ApplicationCtrl.currentUser._id,'No reason')">
                <i class="fa fa-cart-plus" aria-hidden="true"></i> Reserveer</button>
            <button type="button" name="unreserveWish" class="btn btn-block btn-outline-info btn-multiline text-left"
                ng-show="wishInfoCtrl.reservationStatus(wishInfoCtrl.wish) === 'reserved' && wishInfoCtrl.reservedByUser(wishInfoCtrl.wish.reservation.reservedBy._id)"
                ng-click="wishInfoCtrl.deleteReservation(wishInfoCtrl.wish)"><i class="fa fa-ban"
                    aria-hidden="true"></i> Verwijder je reservatie</button>
            <button type="button" name="copyWish" class="btn btn-block btn-outline-info btn-multiline text-left"
                ng-hide="wishInfoCtrl.userIsReceiver(wishInfoCtrl.receiverID)"
                ng-click="wishInfoCtrl.copy(wishInfoCtrl.wish)"><i class="fa fa-clone" aria-hidden="true"></i> Zet ook
                op mijn lijst!</button>
            <button type="button" name="deleteWish" class="btn btn-block btn-outline-info btn-multiline text-left"
                ng-show="wishInfoCtrl.userIsReceiver(wishInfoCtrl.receiverID) || wishInfoCtrl.userIsCreator(wishInfoCtrl.wish.createdBy._id)"
                ng-click="wishInfoCtrl.deleteWish(wishInfoCtrl.wish)"><i class="fa fa-trash" aria-hidden="true"></i>
                Verwijder deze wens</button>
            <button type="button" name="addFeedback" class="btn btn-block btn-outline-danger btn-multiline text-left"
                ng-show="wishInfoCtrl.reservationStatus(wishInfoCtrl.wish) === 'reserved' && wishInfoCtrl.userIsReceiver(wishInfoCtrl.receiverID)"
                ng-click="wishInfoCtrl.openFeedbackPopup(wishInfoCtrl.wish)"><i class="fa fa-gift"
                    aria-hidden="true"></i> Cadeau ontvangen? Geef feedback!</button>
            <!-- ng-if="wishCtrl.reservationStatus(wish) === 'reserved'" ng-show="wishlistCtrl.userIsReceiver" -->
        </div>
    </div>
</div>